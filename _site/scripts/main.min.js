$(document).ready(function(){if($.cookie("ieNotice")==null)$.cookie("ieNotice","1",{expires:7,path:"/"});if($.cookie("ieNotice")=="1")$(".ie-notice-wrap").slideDown("slow");else $(".ie-notice-wrap").css("display","none");$(".ie-notice-close").live("click",function(){$(".ie-notice-wrap").slideUp("slow");$.cookie("ieNotice","0")});textTickerSelected();$(".main-side-nav-ul a").each(function(){if($(this).attr("id")==$(".content").attr("class").split(" ")[1]){$("#stream").removeClass("selected");$(this).addClass("selected");
switch($(".content").attr("class").split(" ")[1]){case "stream":streamPage();break;case "about":break;case "portfolio":portfolioPage();break;case "contact":contactPage();break;case "blog":blogPage();default:break}}});$(".main-side-nav-ul a").hover(function(){$(this).animate({borderLeftWidth:"6px"},{queue:false,duration:60})},function(){$(this).animate({borderLeftWidth:"4px"},{queue:false,duration:60})});$("input:text, input:password, textarea").focus(function(){$(this).css("color","#999")});$("a[rel*=external]").live("click",
function(){window.open(this.href);return false});$("a[rel*=internal]").live("click",function(e){e.preventDefault();return false});$("a[href*=#]").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var $target=$(this.hash);$target=$target.length&&$target||$("[name="+this.hash.slice(1)+"]");if($target.length){var targetOffset=$target.offset().top;$("html,body").animate({scrollTop:targetOffset},1E3);return false}}});$(window).scroll(function(){var scrollTop=
$(document).scrollTop();scrollTop=parseInt(scrollTop);var offset=topYloc+scrollTop+"px";$(".top-link").animate({top:offset},{duration:500,queue:false})});topYloc=parseInt($(".top-link").css("top").substring(0,$(".top-link").css("top").indexOf("px")));$(".icon-social").mtip()});var fixed=false;
$(window).scroll(function(){if(window.innerWidth>=1025)if($(this).scrollTop()>=50){if(!fixed){fixed=true;$(".main-side-nav").css({position:"fixed"})}}else if(fixed){fixed=false;$(".main-side-nav").css({position:"static"})}if(window.innerWidth>=641&&window.innerWidth<=1024)if($(this).scrollTop()>=10){if(!fixed){fixed=true;$(".main-side-nav-info").hide();$(".main-side-nav").css({position:"fixed"})}}else if(fixed){fixed=false;$(".main-side-nav-info").show();$(".main-side-nav").css({position:"static"})}if(window.pageYOffset>=
200)$(".top-link").fadeIn(600);if(window.pageYOffset<200)$(".top-link").fadeOut(185)});
function recent_tweets(data){for(i=0;i<1;i++){var date=new Date(data[i].created_at);document.getElementById("latest-tweet").innerHTML='<div class="latest-tweet-content"><a href="http://twitter.com/miguelmota/status/'+ +(data[i].id_str?data[i].id_str:data[i].id)+'" rel="external">'+data[i].text+'</a> <time class="latest-tweet-date">'+niceTime(data[i].created_at)+"</time></div>"}$("#latest-tweet-wrap").live({mouseenter:function(){showMtip(".icon-twitter-bird-24",this)},mouseleave:function(){hideMtip(".icon-twitter-bird-24",
this)}})}$.getScript("http://miguelmota.tumblr.com/tweets.js");function loadMasonry(){var $tumblelog=$(".content");if(window.width<=640)$tumblelog="";$tumblelog.imagesLoaded(function(){$tumblelog.masonry({isFitWidth:true})})}
function initializeFancybox(){$(".fancybox").fancybox({showCloseButton:false,titlePosition:"inside",titleFormat:formatTitle,padding:0,transitionIn:"none",transitionOut:"none",speedIn:150,overlayColor:"#000",overlayOpacity:0.8});$(".fancybox-iframe").fancybox({height:500,width:500,type:"iframe",autoScale:"false",showCloseButton:false,titlePosition:"inside",titleFormat:formatIframeTitle,padding:0,transitionIn:"none",transitionOut:"none",speedIn:150,overlayColor:"#000",overlayOpacity:0});function formatTitle(title,
currentArray,currentIndex,currentOpts){return'<div class="fancybox-title"><span><a class="button" href="javascript:void(0);" onclick="$.fancybox.close();">close X</a></span>'+(title&&title.length?"<strong>"+title+"</strong>":"")+"Image "+(currentIndex+1)+" of "+currentArray.length+"</div>"}function formatIframeTitle(title,currentArray,currentIndex,currentOpts){return'<div class="fancybox-title fancybox-title-iframe"><span><a class="button" href="javascript:void(0);" onclick="$.fancybox.close();">close X</a></span>'+
(title&&title.length?"<strong>"+title+"</strong>":"")+"</div>"}$(".fancybox").hover(function(){jQuery(".zoom-wrap",this).css("display","block")},function(){jQuery(".zoom-wrap",this).hide()})}
var niceTime=function(){var ints={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592E3,year:31536E3};return function(time){time=+new Date(time);var gap=(+new Date-time)/1E3,amount,measure;for(var i in ints)if(gap>ints[i])measure=i;amount=gap/ints[measure];amount=gap>ints.day?Math.round(amount):Math.round(amount);amount+=" "+measure+(amount>1?"s":"")+" ago";return amount}}();var position=0;
function textTicker(){$("#tumblog").text("tumblog".substring(0,position));$("#stream").text("stream".substring(0,position));$("#about").text("about".substring(0,position));$("#portfolio").text("portfolio".substring(0,position));$("#contact").text("contact".substring(0,position));$("#blog").text("blog".substring(0,position));if(position++==8)setTimeout("textTicker()",1E3);else setTimeout("textTicker()",60)}
function textTickerSelected(){$("#"+$(".content").attr("class").split(" ")[1]).text($(".content").attr("class").split(" ")[1].substring(0,position));if(position++==1)setTimeout("textTickerSelected()",30);else setTimeout("textTickerSelected()",30)}function displayYear(){var date=new Date;var thisYear=date.getFullYear();document.write(thisYear)}function displayURL(){document.write(pathname)}function showMtip(element){var link=element;$(link).trigger("mouseenter")}
function hideMtip(element){var link=element;$(link).trigger("mouseleave")}function showMtipTimeout(element){var link=element;$(link).trigger("mouseenter");setTimeout(function(){$(link).trigger("mouseleave")},3E3)}
function streamPage(){$(".stream-logo:not('.stream-logo-blog ,.stream-logo-latitude')").text("");showMtipTimeout(".stream-logo-blog");showMtipTimeout(".stream-logo-latitude");$(".mtip").mtip();$(".stream-twitter .loader").css("display","block");$.getJSON("http://twitter.com/status/user_timeline/miguel_mota.json?callback=?",{count:"5"},function(data){$.each(data,function(i,status){var htmlString='<ul class="stream-ul stream-ul-twitter">';var post=status.text;var id=status.id_str;var date=(new Date(status.created_at)).toUTCString();
htmlString+="<li id='"+id+"' class='status'><span class='post'><a href='http://twitter.com/miguel_mota/status/"+id+"' rel='external'><span class='icon icon-twitter-bird-16'></span> "+post+"</a></span> <time class='status-date'>"+niceTime(date)+"</time></li>";$(".stream-twitter").append(htmlString+"</ul>")});$(".stream-twitter .loader").css("display","none");showMtipTimeout(".stream-logo-twitter")});$(".stream-facebook .loader").css("display","block");$.getJSON("https://graph.facebook.com/miguel.mota2/feed?&callback=?",
{limit:"3"},function(json){$.each(json.data,function(i,fb){var post=fb.message;var post_id=fb.id.substr(16);var type=fb.type;var link=fb.link;var name=fb.name;var caption=fb.caption;var description=fb.description;var date=(new Date(fb.created_time)).toUTCString();switch(type){case "status":$("ul.facebook-status").append("<li class='status'>&#187; <span class='post'>"+post+"</span> <time class='status-date'><a href='http://www.facebook.com/miguel.mota2/posts/"+post_id+"' rel='external'>"+niceTime(date)+
"</a></time></li>");break;case "link":if(post)$("ul.facebook-status").append("<li class='status'>&#187; Link: <span class='post'>"+post+" <a href='"+link+"' rel='external'>"+name+"</a></span> <time class='status-date'><a href='http://www.facebook.com/miguel.mota2/posts/"+post_id+"'>"+niceTime(date)+"</a></time></li>");else $("ul.facebook-status").append("<li class='status'>&#187; Link: <a href='"+link+"' rel='external'>"+name+"</a></span> <time class='status-date'><a href='http://www.facebook.com/miguel.mota2/posts/"+
post_id+"'>"+niceTime(date)+"</a></time></li>");break;case "video":if(post)$("ul.facebook-status").append("<li class='status'>&#187; Video: <span class='post'>"+post+" <a href='"+link+"' rel='external'>"+name+"</a></span> <time class='status-date'><a href='http://www.facebook.com/miguel.mota2/posts/"+post_id+"'>"+niceTime(date)+"</a></time></li>");else $("ul.facebook-status").append("<li class='status'>&#187; Video: <span class='post'><a href='"+link+"' rel='external'>"+name+"</a></span> <time class='status-date'><a href='http://www.facebook.com/miguel.mota2/posts/"+
post_id+"'>"+niceTime(date)+"</a></time></li>");break;default:break}});$(".stream-facebook .loader").html('<span style="color: #555;>"[fetch failed]</span>');showMtipTimeout(".social.facebook")});$(".stream-tumblr .loader").css("display","block");$.getJSON("http://miguelmota.tumblr.com/api/read/json?num=3&callback=?",function(data){$.each(data.posts,function(i,posts){var htmlString='<ul class="stream-ul stream-ul-tumblr">';var date=(new Date(this["date-gmt"])).toUTCString();var url=this.url;var type=
this.type;var caption=this["photo-caption"];var slug=this.slug.replace(/-/g," ");htmlString+="<li><a href='"+url+"' rel='external'><span class='icon icon-"+type+"-16'></span> "+slug.substring(0,1).toUpperCase()+slug.substr(1,200)+"</a> <time class='status-date'>"+niceTime(date)+"</time></li>";$(".stream-tumblr").append(htmlString+"</ul>")});$(".stream-tumblr .loader").css("display","none");showMtipTimeout(".stream-logo-tumblr")});$(".stream-delicious .loader").css("display","block");$.getJSON("http://feeds.delicious.com/v2/json/miguelmota?callback=?",
{count:"3"},function(data){$.each(data,function(i,item){var htmlString='<ul class="stream-ul stream-ul-delicious">';var title=item.d;var url=item.u;var date=(new Date(item.dt)).toUTCString();htmlString+="<li><a href='"+url+"' rel='external'><span class='icon icon-link-16'></span> "+title+"</a> <time class='status-date'>"+niceTime(date)+"</time></li>";$(".stream-delicious").append(htmlString+"</ul>")});$(".stream-delicious .loader").css("display","none");showMtipTimeout(".stream-logo-delicious")});
$(".stream-lastfm .loader").css("display","block");$.getJSON("http://ws.audioscrobbler.com/2.0/?callback=?",{format:"json",method:"user.getRecentTracks",user:"miguel_mota",api_key:"dc0e875b6c0fd8ac4891b0716897e6c1",limit:"5"},function(data){$.each(data.recenttracks.track,function(i,item){var htmlString='<ul class="stream-ul stream-ul-lastfm stream-ul-chart">';var url=item.url;var name=item.name;var artist=item.artist["#text"];var image=item.image[0]["#text"];var date=item.date["#text"];htmlString+=
"<li><a href='"+url+"' rel='external'><img class='stream-thumb' src='"+image+"' alt='' /> "+artist+" - "+name+"</a> <time class='status-date'>"+date+"</time></li>";$(".stream-lastfm").append(htmlString+"</ul>")});$(".stream-lastfm .loader").css("display","none");showMtipTimeout(".stream-logo-lastfm")});$(".stream-wakoopa .loader").css("display","block");$.getJSON("http://api.wakoopa.com/miguelmota/recently_used.json?callback=?",{limit:"3"},function wakoopaApi(data){var html=["<ul class='stream-ul stream-ul-wakoopa stream-ul-chart'>"];
for(var i=0;i<data.length;i++){var entry=data[i].software;var date=(new Date(entry.last_active_at)).toUTCString();html.push("<li><a href='"+entry.complete_url+"' rel='external'> <img class='stream-thumb' src='"+entry.complete_thumb_url+"' alt='' /> "+entry.name+"</a> <time class='status-date'>"+niceTime(date)+"</time>","</li>")}html.push("</ul>");document.getElementById("stream-wakoopa-software").innerHTML=html.join("");$(".stream-wakoopa .loader").css("display","none");showMtipTimeout(".stream-logo-wakoopa")});
$.getJSON("http://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&jsoncallback=?",{format:"json",api_key:"2a3074a0411f6d3649972787fcacea59",user_id:"40464790@N08"},function jsonFlickrFeed(data){var htmlString='<div class="stream-carousel-wrap"><a href="javascript:void(0);" class="stream-carousel-nav stream-carousel-nav-prev"><span class="stream-carousel-nav-inner">&#171;</span></a><div class="stream-carousel stream-carousel-flickr"><ul class="stream-ul stream-ul-flickr jcarousel-skin-tango">';
$.each(data.photos.photo,function(i,item){var flickr_id=item.id;var flickr_farm=item.farm;var flickr_server=item.server;var flickr_secret=item.secret;var flickr_title=item.title;var flickr_thumbnail="http://farm"+flickr_farm+".static.flickr.com/"+flickr_server+"/"+flickr_id+"_"+flickr_secret+"_m.jpg";var flickr_photo="http://farm"+flickr_farm+".static.flickr.com/"+flickr_server+"/"+flickr_id+"_"+flickr_secret+"_b.jpg";htmlString+="<li><a class='fancybox' rel='flickr' href='"+flickr_photo+"' title='"+
flickr_title+" ["+flickr_id+"]'><img src='"+flickr_thumbnail+"' alt='' /><span class='zoom-wrap zoom-wrap-flickr'><span class='icon icon-zoom-24 icon-zoom-flickr'></span></span></a></li>"});$(".stream-flickr .loader").css("display","none");$(".stream-flickr").append(htmlString+'</ul></div><a href="javascript:void(0);" class="stream-carousel-nav stream-carousel-nav-next"><span class="stream-carousel-nav-inner">&#187;</span></a></div><div class="clear"></div>');showMtipTimeout(".stream-logo-flickr");
$(".stream-carousel-flickr").jCarouselLite({btnNext:".stream-carousel-nav-next",btnPrev:".stream-carousel-nav-prev"});$(".stream-wrap").draggable({containment:".content",cursor:"move"});$(".stream-latitude").css({top:$.cookie("streamLatitudeY")*1,left:$.cookie("streamLatitudeX")*1}).draggable({stop:function(event,ui){$.cookie("streamLatitudeX",ui.position.left);$.cookie("streamLatitudeY",ui.position.top)}});$(".stream-blog").css({top:$.cookie("streamBlogY")*1,left:$.cookie("streamBlogX")*1}).draggable({stop:function(event,
ui){$.cookie("streamBlogX",ui.position.left);$.cookie("streamBlogY",ui.position.top)}});$(".stream-twitter").css({top:$.cookie("streamTwitterY")*1,left:$.cookie("streamTwitterX")*1}).draggable({stop:function(event,ui){$.cookie("streamTwitterX",ui.position.left);$.cookie("streamTwitterY",ui.position.top)}});$(".stream-facebook").css({top:$.cookie("streamFacebookY")*1,left:$.cookie("streamFacebookX")*1}).draggable({stop:function(event,ui){$.cookie("streamFacebookX",ui.position.left);$.cookie("streamFacebookY",
ui.position.top)}});$(".stream-tumblr").css({top:$.cookie("streamTumblrY")*1,left:$.cookie("streamTumblrX")*1}).draggable({stop:function(event,ui){$.cookie("streamTumblrX",ui.position.left);$.cookie("streamTumblrY",ui.position.top)}});$(".stream-delicious").css({top:$.cookie("streamDeliciousY")*1,left:$.cookie("streamDeliciousX")*1}).draggable({stop:function(event,ui){$.cookie("streamDeliciousX",ui.position.left);$.cookie("streamDeliciousY",ui.position.top)}});$(".stream-lastfm").css({top:$.cookie("streamLastfmY")*
1,left:$.cookie("streamLastfmX")*1}).draggable({stop:function(event,ui){$.cookie("streamLastfmX",ui.position.left);$.cookie("streamLastfmY",ui.position.top)}});$(".stream-wakoopa").css({top:$.cookie("streamWakoopaY")*1,left:$.cookie("streamWakoopaX")*1}).draggable({stop:function(event,ui){$.cookie("streamWakoopaX",ui.position.left);$.cookie("streamWakoopaY",ui.position.top)}});$(".stream-flickr").css({top:$.cookie("streamFlickrY")*1,left:$.cookie("streamFlickrX")*1}).draggable({stop:function(event,
ui){$.cookie("streamFlickrX",ui.position.left);$.cookie("streamFlickrY",ui.position.top)}});initializeFancybox()});$(".stream-wrap").live({mouseenter:function(){showMtip("."+$(this).attr("class").split(" ")[1]+" .stream-logo")},mouseleave:function(){hideMtip("."+$(this).attr("class").split(" ")[1]+" .stream-logo")}})}
function portfolioPage(){$(".project .image-container").live({mouseenter:function(){$(this).css({"-webkit-box-shadow":"0 0 10px #fff","-moz-box-shadow":"0 0 10px #fff","box-shadow":"0 0 10px #fff"})},mouseleave:function(){$(this).css({"-webkit-box-shadow":"2px 2px 5px #111","-moz-box-shadow":"2px 2px 5px #111","box-shadow":"2px 2px 5px #111"})}});$(".project").live({mouseenter:function(){jQuery(".overlay-popup",this).animate({bottom:"0"},{queue:false,duration:150})},mouseleave:function(){jQuery(".overlay-popup",
this).animate({bottom:"-100px"},{queue:false,duration:125})}});$(".project-sort-all").live("click",function(){$(".project-sort-wrap a").removeClass("selected");$(this).addClass("selected");$(".project").slideDown("fast")});$(".project-sort-web").live("click",function(){$(".project-sort-wrap a").removeClass("selected");$(this).addClass("selected");$(".project:not('.project-web')").slideUp("fast");$(".project-web").slideDown("fast")});$(".project-sort-identity").live("click",function(){$(".project-sort-wrap a").removeClass("selected");
$(this).addClass("selected");$(".project:not('.project-identity')").slideUp("fast");$(".project-identity").slideDown("fast")});$(".project-sort-code").live("click",function(){$(".project-sort-wrap a").removeClass("selected");$(this).addClass("selected");$(".project:not('.project-code')").slideUp("fast");$(".project-code").slideDown("fast")});initializeFancybox()}
function contactPage(){$(".contact-form-submit").live("click",function(){$.validator.addMethod("namecheck",function(value,element){return this.optional(element)||/^[a-zA-Z]*$/.test(value)});$(".contact-form").validate({rules:{name:{namecheck:true,required:true},email:{required:true,email:true},message:{required:true,minlength:2}},messages:{name:{namecheck:"",required:""},email:{required:"",email:""},message:"",minlength:""},onkeyup:true,debug:true});if($(".contact-form").valid()==true){$(".contact-form-submit").html("<span>sending...</span>");
var str=$(".contact-form").serialize();$.ajax({type:"get",url:"http://www.foodfail.org/miguelmota/contact.php",data:str,success:function(){sendSuccess()},error:function(){sendError()}});return false}else return false});function sendSuccess(){var name=$("#contact-form-name").val();$(".contact-form").slideUp(300,function(){$(".contact-form-thank-you").html('<p class="thank-you-name">Thank you, <strong>'+name+'</strong>.</p><p>Your message has been successfully sent <span class="icon icon-checkmark-16 icon-no-hover icon-no-opacity"></span><br />I will get in touch with you soon.</p>').fadeIn(1200)})}
function sendError(){$(".contact-form").slideUp(300,function(){$(".contact-form-thank-you").html('<p>Sorry, there was an error. Message was not sent.</p><p>Email <a href="mailto:hello@miguelmota.com">hello@miguelmota.com</a>?</p>')})}}
function blogPage(){$(".blog-post-sort-grid").live("click",function(){$(".blog-post-sort-wrap a").removeClass("icon-no-hover icon-no-opacity");$(this).addClass("icon-no-hover icon-no-opacity");$(".blog-post-list").slideUp("fast");$(".blog-post-grid").slideDown("fast")});$(".blog-post-sort-list").live("click",function(){$(".blog-post-sort-wrap a").removeClass("icon-no-hover icon-no-opacity");$(this).addClass("icon-no-hover icon-no-opacity");$(".blog-post-grid").slideUp("fast");$(".blog-post-list").slideDown("fast")});
$.getScript("http://s7.addthis.com/js/250/addthis_widget.js#username=miguelmota");$.getScript("http://platform.twitter.com/widgets.js");$(".short-url").focus(function(){$(this).select()});$(".short-url").mouseup(function(e){e.preventDefault()})};