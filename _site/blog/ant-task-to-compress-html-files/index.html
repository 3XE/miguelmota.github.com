<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<!--
	                                      ___                           __
	           __                        /\_ \                         /\ \__
	  ___ ___ /\_\     __   __  __     __\//\ \         ___ ___     ___\ \ ,_\    __
	/' __` __`\/\ \  /'_ `\/\ \/\ \  /'__`\\ \ \      /' __` __`\  / __`\ \ \/  /'__`\
	/\ \/\ \/\ \ \ \/\ \L\ \ \ \_\ \/\  __/ \_\ \_    /\ \/\ \/\ \/\ \L\ \ \ \_/\ \L\.\_
	\ \_\ \_\ \_\ \_\ \____ \ \____/\ \____\/\____\   \ \_\ \_\ \_\ \____/\ \__\ \__/.\_\
	 \/_/\/_/\/_/\/_/\/___L\ \/___/  \/____/\/____/    \/_/\/_/\/_/\/___/  \/__/\/__/\/_/
	                   /\____/
	                   \_/__/
	-->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="Tutorial on how to create an ant task to compress html files.">
	<meta name="keywords" content="miguel mota,web developer,creative freelance,html5 css3 web design">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0;">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-title" content="Miguel Mota">
	<title>Ant task to compress HTML files | Miguel Mota - Web Developer</title>
	<link rel="canonical" href="http://www.miguelmota.com/">
	<link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/miguelmota">
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png">
	<link rel="apple-touch-startup-image" href="/startup.png">
	<link rel="stylesheet" href="/css/pygments/murphy.css">
	<link rel="stylesheet" href="/css/style.css">
	<link href="http://fonts.googleapis.com/css?family=Poly:400,400italic" rel="stylesheet" type="text/css">
	<script src="/vendor/modernizr/modernizr.js"></script>
	<script src="/vendor/jquery/jquery.js"></script>
	<script>
	  	var _gaq = _gaq || [];
	   	_gaq.push(['_setAccount', 'UA-12642068-1']);
	   	_gaq.push(['_setDomainName', '.miguelmota.com']);
	  	_gaq.push(['_trackPageview']);
	   	(function() {
	     		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	     		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	     		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	   	})();
	</script>
</head>
	<body>
		<div id="top"></div>
		<header>
			<div>
				<p id="logo"><a href="/">Miguel Mota</a></p>
				<nav>
					<ul>
						<li><a href="/about" data-ga-label="Navigation - About">About</a></li>
						<li><a href="/contact" data-ga-label="Navigation - Contact">Contact</a></li>
					</ul>
				</nav>
			</div>
		</header>

		<div id="content">
		<div id="post">
<h2>14 Oct 2011</h2>
<h1>Ant task to compress HTML files</h1>
<p class="baseline"></p>

<p>I will show you how to compress your HTML files using the Java library <a href="http://code.google.com/p/htmlcompressor/" target="_blank" rel="nofollow">HtmlCompressor</a>.
So let's say your html code looks something like this:</p>
<div class="highlight"><pre><code class="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;title&gt;</span>htmlcompressor<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;p&gt;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed gravida suscipit lectus.<span class="nt">&lt;/p&gt;</span>
	<span class="c">&lt;!-- comment --&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>


<p>After we compress it, it'll look like this:</p>

<div class="highlight"><pre><code class="html"><span class="cp">&lt;!doctype html&gt;</span> <span class="nt">&lt;html&gt;</span> <span class="nt">&lt;head&gt;</span> <span class="nt">&lt;title&gt;</span>htmlcompressor<span class="nt">&lt;/title&gt;</span> <span class="nt">&lt;/head&gt;</span> <span class="nt">&lt;body&gt;</span> <span class="nt">&lt;p&gt;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed gravida suscipit lectus.<span class="nt">&lt;/p&gt;</span> <span class="nt">&lt;/body&gt;</span> <span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>


<p>Compressing your html files reduces it's size by ~20% by removing unnecessary white space, comments and stuff that it doesn't need in order to keep the structure of the content. The result is a smaller file size which equals to faster page load.</p>

<p>Ok, so first make sure you have <a href='http://ant.apache.org/' target="_blank" rel="nofollow">ant</a> installed in <a href="http://www.eclipse.org/" target="_blank" rel="nofollow">eclipse</a>. After go ahead and download the <code>htmlcompressor</code> <code>.jar</code> from it's <a href="http://code.google.com/p/htmlcompressor/">Google Project page</a>.
Create a directory in the root of your project called <code>lib</code> and drop the <code>.jar</code> in it. Then again in the root directory, create the xml file called <code>build.xml</code>. Include the following code:</p>

<script src="https://gist.github.com/miguelmota/4750373.js"></script>

<p>What we did is created a project which will execute the <code>compress-html</code> target by default. In the target we are telling it to include all the <code>html</code> files in the root directory
and then output the compressed files in a new directory called <code>compressed</code>. the <code>-t</code> flag means <code>type</code> and <code>-o</code> means <code>output</code>. By default the filenames of the source files will be added to
the end fo the command, so we use <code>srcfile</code> to place it where we want it. <code>targetfile</code> is used to add the target filenames to the command or else they'll be left out. The <code>mapper</code> type <code>glob</code> means that it will substitue the <code>*</code> in the <code>to</code> pattern with the text that matches the <code>*</code> in the <code>from</code> pattern.</p>

<p>Now run the <code>build.xml</code> as an <code>Ant Build</code> and everything should go as planned. I hope this helped!</p>


	<div id="posts">
		<h3>See also...</h3>

		
			<dt>04 Apr 2013</dt>
<dd><a href="/blog/extensive-gitignore">Extensive .gitignore</a></dd>
		
			<dt>25 Mar 2013</dt>
<dd><a href="/blog/screaming-goat">screaming-goat.com</a></dd>
		
			<dt>22 Jul 2012</dt>
<dd><a href="/blog/css3-filters">CSS3 Filters</a></dd>
		
			<dt>20 Feb 2012</dt>
<dd><a href="/blog/miggs-url-shortener">mig.gs - url shortener</a></dd>
		
			<dt>22 Jan 2012</dt>
<dd><a href="/blog/how-to-survive-a-zombie-outbreak">How To Survive a Zombie Outbreak</a></dd>
		
			<dt>11 Oct 2011</dt>
<dd><a href="/blog/display-latest-delicious-bookmarks-with-jquery">Display latest delicious bookmarks with jQuery</a></dd>
		
			<dt>09 Aug 2011</dt>
<dd><a href="/blog/html5-reset-stylesheet">HTML5 Reset Stylesheet</a></dd>
		
			<dt>24 May 2011</dt>
<dd><a href="/blog/make-an-awesome-tooltip-with-jquery">Make an Awesome Tooltip with jQuery</a></dd>
		
			<dt>30 Mar 2011</dt>
<dd><a href="/blog/hello-world">Hello World!</a></dd>
		
	</div>



</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'miguelmota';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

		</div>

		<footer>
			<p>&copy; Miguel Mota</p>
		</footer>

		<div><a href="https://github.com/miguelmota/miguelmota.github.com" target="_blank" data-ga-label="Fork me on Github"><img style="position:fixed;top:0;right:0; border:0;z-index:100000;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt=""></a>
		</div>
	</body>
</html>
