<!doctype html>
<html>
<head>
  <meta name='description' content='' />
  <title>Directions</title>
  <script src='http://www.miguelmota.com/scripts/jquery.min.js'></script>
  <script src='http://www.google.com/jsapi?key=ABQIAAAAaPkBW3vge4odDUBtbC4e-xRutoCKHFl1g3ES_cmPf4BxqcVG3BR7pbnwzjWgqiKDxSEqSvzSUG2pww'></script>
  <script src='http://maps.google.com/maps/api/js?sensor=false'></script>
  <!--[if lt IE 9]>
    <script src='/scripts/html5.js'></script>
  <![endif]-->
  <style>
    #map_canvas {
      display: block;
      height: 300px;
      width: 100%;
    }
    #map_directions {
      display: block;
      height: auto;
      width: 100%;
    }
  </style>
</head>
<body>
  <script>
    $(document).ready(function () {
      $('#calculate').live('click', function() {
        calcRoute();
      });
    });

    var rendererOptions = {
      draggable: true
    };
    var directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
    var directionsService = new google.maps.DirectionsService();

    function iniMap() {
      directionsDisplay = new google.maps.DirectionsRenderer();
      var norcoCollege = new google.maps.LatLng(33.916013, -117.568796);
      var myOptions = {
        zoom: 16,
        center: norcoCollege,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }

      var map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

      directionsDisplay.setMap(map);
      directionsDisplay.setPanel(document.getElementById('map_directions'));

      defaultSettings();
    }

    function calcRoute() {
      if (document.getElementById('start').value != "") {
        activeSettings();
      }
      else {
        defaultSettings();
      }

      var start = document.getElementById('start').value;
      var end = document.getElementById('end').value;

      var request = {
        origin: start,
        destination: end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
      };

      directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
          directionsDisplay.setDirections(response);
        }
      });

    }

    function defaultSettings() {
      document.getElementById('map_canvas').style.display = 'block';
      document.getElementById('map_directions').style.display = 'none';
    }

    function activeSettings() {
      document.getElementById('map_canvas').style.display = 'block';
      document.getElementById('map_directions').style.display = 'block';
    }

    google.setOnLoadCallback(iniMap);
  </script>

  <input type='text' name='start' id='start' />
  <input type='hidden' name='end' id='end' value='2001 Third Street Norco, CA 92860' />
  <input type='button' id='calculate' value='get directions' />

  <div id='map_canvas'></div>
  <div id='map_directions'></div>
</body>
</html>
