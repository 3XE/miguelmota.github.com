<!doctype html>
<html>
<head>
	<meta name='description' content='' />
	<title>Manda Panda</title>
	<meta name='viewport' content='width=device-width, initial-scale=0, maximum-scale=1, user-scalable=1;' />
	<link href='http://fonts.googleapis.com/css?family=Shadows+Into+Light+Two' rel='stylesheet'>
	<script src='/scripts/jquery.min.js'></script>
	<!--[if lt IE 9]>
		<script src='/scripts/html5.js'></script>
		<script src='/scripts/excanvas.js'></script>
	<![endif]-->
	<style>
	body {
		background: transparent url('/assets/amanda/amanda.jpg') no-repeat 50% 80px;
		font-family: 'Shadows Into Light Two', cursive;
		margin: 0 auto;
		width: 452px;
	}
	.title {
		font-size: 28px;
	}
	#canvas {
		background: transparent url('/assets/amanda/amanda.jpg') no-repeat 0 0;
		border: 1px solid #ddd;
		clear: both;
		display: block;
		height: 603px;
	    width: 452px;
	}
	#canvas:hover {
		cursor: pointer;
	}
	#canvas:active {
		cursor: crosshair;
	}
	#canvasClearBtn {
		clear: both;
	}
	#paintbox {
		border: 1px solid #9a9a9a;
		width: 100%;
	}
	</style>
</head>
<body>
	<div class='title'>Draw on Manda Panda</div>

  <p><input type="button" value="Clear" id="clearBtn"/></p>
  <canvas id="paintBox">
    Your browser doesnot support canvas
  </canvas>

  <script type="text/javascript">
  var canvas = null; //canvas object
  var context = null; //canvas's context object
  var clearBtn = null; //clear button object

  /*boolean var to check if the touchstart event
  is caused and then record the initial co-ordinate*/
  var buttonDown = false;

  //onLoad event register
  window.addEventListener('load', initApp, false);

  function initApp() {
    setTimeout(function() { window.scrollTo(0, 1); }, 10); //hide the address bar of the browser.
    canvas = document.getElementById('paintBox');
    clearBtn = document.getElementById('clearBtn');

    setCanvasDmiension();
    initializeEvents();

    context = canvas.getContext('2d'); //get the 2D drawing context of the canvas
}

function setCanvasDmiension() {
  //canvas.width = 300; //window.innerWidth;
  canvas.height = window.innerHeight; //setting the height of the canvas
}

function initializeEvents() {
  canvas.addEventListener('touchstart', startPaint, false);
  canvas.addEventListener('touchmove', continuePaint, false);
  canvas.addEventListener('touchend', stopPaint, false);

  clearBtn.addEventListener('touchend', clearCanvas,false);
}

function clearCanvas() {
  context.clearRect(0,0,canvas.width,canvas.height);
}

function startPaint(evt) {
  if(!buttonDown)
  {
    context.beginPath();
    context.moveTo(evt.touches[0].pageX, evt.touches[0].pageY);
    buttonDown = true;
  }
  evt.preventDefault();
}

function continuePaint(evt) {
  if(buttonDown)
  {
    context.lineTo(evt.touches[0].pageX,evt.touches[0].pageY);
    context.stroke();
  }
}

function stopPaint() {
  buttonDown = false;
}
</script>
</body>
</html>