http://www.domenlightenment.com/


# Node Object Types

DOCUMENT_NODE ex. window.document
ELEMENT_NODE ex. <body>,<p>
ATTRIBUTE_NODE ex. class="foo"
TEXT_NODE ex. text chars in html
DOCUMENT_FRAGMENT_NODE ex. document.createDocumentFragment()
DOCUMENT_TYPE_NODE ex <!doctype html>

they map to values
Node.ELEMENT_NODE = 1

for (var key in Node) {
  console.log(key, ' = ' + Node[key]);
}

javascript constructed interfaces ..map to node types
HTML*Element -> ELEMENT_NODE
HTMLBodyElement -> ELEMENT_NODE
Text  -> TEXT_NODE
Attr -> AT..
HTMLDocument -> DOCU..
DocumentFragment -> DOCUMENT_FRAGMENT_NODE
DocumentType -> DOCUMENT_TYPE_NODE
Comment -> COMMENT_NODE

ALl node types inherit from Node. Node is a constructor function
sub nodes
HTMLAnchorElement > Element > Node > Object

view all node properties

//get reference to element node object
var nodeAnchor = document.querySelector('a');

//create props array to store property keys for element node object
var props = [];

//loop over element node object getting all properties & methods (inherited too)
for(var key in nodeAnchor){
    props.push(key);
}

//log alphabetical list of properties & methods
console.log(props.sort());


common Node properties inherited
childNodes
firstChild
lastChild
nextSibling
nodeName
nodeType
nodeValue
parentNode
previousSibling

common Node method
appendChild()
cloneNode()
compareDocumentPosition()
contains()
hasChildNodes()
insertBefore()
isEqualNode()
removeChild()
replaceChild()

Document method
document.createElement()
document.createTextNode()

HTML*Element props
innerHTML
outerHTML
textContent
innerText
outerText
firstElementChild
lastElementChild
nextElementChild
previousElementChild
children

HTML element method
insertAdjacentHTML()

# Identifying type and name of a Node

nodeType
nodeName

//This is DOCUMENT_TYPE_NODE or nodeType 10 because Node.DOCUMENT_TYPE_NODE === 10
console.log(
    document.doctype.nodeName, //logs 'html' WHAT? try document.doctype to get <!DOCTYPE html>
    document.doctype.nodeType //logs 10 which maps to DOCUMENT_TYPE_NODE
);

//This is DOCUMENT_NODE or nodeType 9 because Node.DOCUMENT_NODE === 9
console.log(
    document.nodeName, //logs '#document'
    document.nodeType //logs 9 which maps to DOCUMENT_NODE
);

//This is DOCUMENT_FRAGMENT_NODE or nodeType 11 because Node.DOCUMENT_FRAGMENT_NODE === 11
console.log(
    document.createDocumentFragment().nodeName, //logs '#document-fragment'
    document.createDocumentFragment().nodeType //logs 11 which maps to DOCUMENT_FRAGMENT_NODE
);

//This is ELEMENT_NODE or nodeType 1 because Node. ELEMENT_NODE === 1
console.log(
    document.querySelector('a').nodeName, //logs 'A'
    document.querySelector('a').nodeType //logs 1 which maps to ELEMENT_NODE
);

//This is ATTRIBUTE_NODE or nodeType 2 because Node.ATTRIBUTE_NODE === 2
console.log(
    document.querySelector('a').attributes['href'].nodeName, //logs 'href'
    document.querySelector('a').attributes['href'].nodeType //logs 2 which maps to ATTRIBUTE_NODE

);

//This is TEXT_NODE or nodeType 3 because Node.TEXT_NODE === 3
console.log(
    document.querySelector('a').firstChild.nodeName, //logs '#text'
    document.querySelector('a').firstChild.nodeType //logs 3 which maps to TEXT_NODE
);



//is <a> a ELEMENT_NODE?
console.log(document.querySelector('a').nodeType === 1); //logs true, <a> is an Element node


//or use Node.ELEMENT_NODE which is a property containing the numerice value of 1
console.log(document.querySelector('a').nodeType === Node.ELEMENT_NODE); //logs true, <a> is an Element node


# Getting a Node's Value

nodeValue null by default

gets Text and Comment node values
<a href="#">Hi</a>

console.log(document.querySelector('a').nodeValue); // null

console.log(document.querySelector('a').firstChild.nodeValue); //logs 'Hi'
set value
document.querySelector('a').firstChild.nodeValue = 'hello'

# Create Element and Text Nodes

when browser parses and HTML document it constructs the nodes and tree based on the contents of the HTML file

createElement()
createTextNode()

var elementNode = document.createElement('div'); // string same as tagName from Element obj
console.log(elementNode, elementNode.nodeType); //log <div> 1, and 1 indicates an element node

var textNode = document.createTextNode('Hi');
console.log(textNode, textNode.nodeType); //logs Text {} 3, and 3 indicates a text node


# Strings to create elements

<div id="A"></div>
<div id="B"></div>
<span id="C"></span>
<div id="D"></div>
<div id="E"></div>



//create a strong element and text node and add it to the DOM
document.getElementById('A').innerHTML = '<strong>Hi</strong>';

//create a div element and text node to replace <span id="B"></div> (notice div#B is replaced)
document.getElementById('B').outerHTML = '<div id="B" class="new">Whats Shaking</div>'

//create a text node and update the div#C with the text node
document.getElementById('C').textContent = 'dude';

//create a text node and update the div#D with the text node
document.getElementById('D').innerText = 'Keep it';

//create a text node and replace the div#E with the text node (notice div#E is gone)
document.getElementById('E').outerText = 'real!';
document.getElementById('E').outerText // 'real!';

console.log(document.body.innerHTML);
/* logs
<div id="A"><strong>Hi</strong></div>
<div id="B" class="new">Whats Shaking</div>
<span id="C">dude</span>
<div id="D">Keep it</div>
real!
*/

textContent, innerText, outerText will return all nodes contained within including text

insertAdjacentHTML() used to insert before or after tags

<i id="elm">how</i>

var elm = document.getElementById('elm');

elm.insertAdjacentHTML('beforebegin', '<span>Hey-</span>');
elm.insertAdjacentHTML('afterbegin', '<span>dude-</span>');
elm.insertAdjacentHTML('beforeend', '<span>-are</span>');
elm.insertAdjacentHTML('afterend', '<span>-you?</span>');

console.log(document.body.innerHTML);
<span>Hey-</span>
<i id="elm">
  <span>dude-</span>
  how
  <span>-are</span>
</i>
<span>-you?</span>

innerHTML invokes a heavy and expensive HTML parser so use it sparingly

inserAdjacentHTML will only work if node is in DOM tree
textContent gets content of all elements including <script> and <style>
but innerText does not

innerText will not return styles with display none
textContent will

appendChild() append to end of child nodes
insertBefore() more control over where to insert node

//create a blink element node and text node
var elementNode = document.createElement('strong');
var textNode = document.createTextNode(' Dude');

//append these nodes to the DOM
document.querySelector('p').appendChild(elementNode);
document.querySelector('strong').appendChild(textNode);

//log's <p>Hi<strong> Dude</strong></p>
console.log(document.body.innerHTML);

---
<ul>
    <li>2</li>
    <li>3</li>
</ul>

//create a text node and li element node and append the text to the li
var text1 = document.createTextNode('1');
var li = document.createElement('li');
li.appendChild(text1);

//select the ul in the document
var ul = document.querySelector('ul');

/*
add the li element we created above to the DOM, notice I call on <ul> and pass reference to <li>2</li> using ul.firstChild
*/
ul.insertBefore(li,ul.firstChild);

console.log(document.body.innerHTML);
/*logs
<ul>
<li>1</li>
<li>2</li>
<li>3</li>
</ul>
*/

removeChild()
replaceChild()
they all return the replaced or deleted node, taken out of dom, have reference of it in memory

<div id="A">Hi</div>
<div id="B">Dude</div>

//remove element node
var divA = document.getElementById('A');
divA.parentNode.removeChild(divA);

//remove text node
var divB = document.getElementById('B').firstChild;
divB.parentNode.removeChild(divB);

//log the new DOM updates, which should only show the remaining empty div#B
console.log(document.body.innerHTML);


<div id="A">Hi</div>
<div id="B">Dude</div>



//replace element node
var divA = document.getElementById('A');
var newSpan = document.createElement('span');
newSpan.textContent = 'Howdy';
divA.parentNode.replaceChild(newSpan,divA);

//replace text node
var divB = document.getElementById('B').firstChild;
var newText = document.createTextNode('buddy');
divB.parentNode.replaceChild(newText, divB);

//log the new DOM updates,
console.log(document.body.innerHTML);
<span>Howdy</span>
<div id="B">buddy</div>

--
var cloneUL = document.querySelector('ul').cloneNode();

<ul>
  <li>Hi</li>
  <li>there</li>
</ul>

console.log(cloneUL.toString()); //logs [object HTMLUListElement]
console.log(cloneUL.innerHTML); //logs (an empty string) as only the ul was cloned

var cloneUL = document.querySelector('ul').cloneNode(true); // clone childs as well
innerHTML
<li>Hi</li>
<li>there</li>
anything added with addEventListener or onclick is not cloned

cloneNode may lead to id dups

# Node collections

NodeList - document.querySelectorAll('*')
HTMLCollection - document.scripts, document.links

array like
collection can be either live or static.
nodes are soreted inside collection by tree order

childNodes - NodeList

<ul>
hello
<!-- comment -->
<li></li>
</ul>
[].slice.call(document.querySelector('ul').childNodes).forEach() // also is a snapshot(static)

# Traversing Nodes

parentNode
firstChild
lastChild
nextSibling
previousSibling

<ul><!-- comment -->
<li id="A"></li>
<li id="B"></li>
<!-- comment -->
</ul>
//cache selection of the ul
var ul = document.querySelector('ul');

//What is the parentNode of the ul?
console.log(ul.parentNode.nodeName); //logs body

//What is the first child of the ul?
console.log(ul.firstChild.nodeName); //logs comment

//What is the last child of the ul?
console.log(ul.lastChild.nodeName); //logs text not comment, because there is a line break

//What is the nextSibling of the first li?
console.log(ul.querySelector('#A').nextSibling.nodeName); //logs text

//What is the previousSibling of the last li?
console.log(ul.querySelector('#B').previousSibling.nodeName); //logs text

-
childElementCount
firstElementChild - no text/comment
nextElementSibling

//cache selection of the ul
var ul = document.querySelector('ul');

//What is the first child of the ul?
console.log(ul.firstElementChild.nodeName); //logs li

//What is the last child of the ul?
console.log(ul.lastElementChild.nodeName); //logs li

//What is the nextSibling of the first li?
console.log(ul.querySelector('#A').nextElementSibling.nodeName); //logs li

//What is the previousSibling of the last li?
console.log(ul.querySelector('#B').previousElementSibling.nodeName); //logs li

//What are the element only child nodes of the ul?
console.log(ul.children); //logs array, contains all child nodes including text nodes

//What is the parent element of the first li?
console.log(ul.firstElementChild.parentElement); //logs ul

# Verifying a node position in DOM tree with

contains()
compareDocumentPosition()
https://developer.mozilla.org/en-US/docs/Web/API/Node.compareDocumentPosition

 document.querySelector('html').contains(document.querySelector('body')); // true, also true if identical


 if equal
Node.isEqualNode(Node)


<input type="text">
<input type="text">

<textarea>foo</textarea>
<textarea>bar</textarea>
//logs true, because they are exactly identical
var input = document.querySelectorAll('input');
console.log(input[0].isEqualNode(input[1]));

//logs false, because the child text node is not the same
var textarea = document.querySelectorAll('textarea');
console.log(textarea[0].isEqualNode(textarea[1]));

# Chapter 2


